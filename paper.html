<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Summary • deident</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="Summary"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">deident</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="articles/rationale.html">Rationale for De-identification</a>
    </li>
    <li>
      <a href="articles/transformations.html">Transformations</a>
    </li>
    <li>
      <a href="articles/blur_example.html">Blur Example</a>
    </li>
    <li>
      <a href="articles/encrypt_example.html">Encrypt Example</a>
    </li>
    <li>
      <a href="articles/numeric_blur_example.html">Numeric Blur Example</a>
    </li>
    <li>
      <a href="articles/perturb_example.html">Perturb Example</a>
    </li>
    <li>
      <a href="articles/reusing_methods.html">Re-using Methods</a>
    </li>
    <li>
      <a href="articles/shuffle_example.html">Shuffle Example</a>
    </li>
    <li>
      <a href="articles/worked_example.html">Worked Example</a>
    </li>
  </ul></li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Summary</h1>
    </div>


<div id="summary" class="section level1">

<p>The delivery of quality health care is a constant act of balancing demand against capacity, with emerging, data intensive, artificial intelligence (AI) and machine learning (ML) approaches poised to bridge gaps in the large, resource-limited sector [@harwich2018thinking; @wilson2019high; @nelson2019predicting; @yu2018artificial]. The scale of data required in such projects magnifies the importance of existing ethical and legal frameworks for research with human participants [@sales2000ethics; @UKRI], notably around the risks posed by the processing of personally identifiable data (PID) and pseudo-PID (variables which if used together can identify an individual) [@ICO].</p>
<p>One approach to dealing with PID concerns is to apply transformations to the data, e.g. encryption of names, or aggregation of ages, which can limit the risk of identification at the cost of nuance [@tachepun2020data]. Hence, we demonstrate an extendable package of tools for the implementation and application of deidentification techniques to panel data sets.</p>
</div>
<div class="section level1">
<h1 id="statement-of-need">Statement of need<a class="anchor" aria-label="anchor" href="#statement-of-need"></a></h1>
<p>In order to broaden the access to sensitive data, data handlers need an auditable open process for the application of data transforms that limit the risk of personal identification (sometimes refereed to as ‘data masking’ transformations). Several production scale systems exist for applying data masking transformations (e.g. <a href="https://www.delphix.com/" class="external-link">Delphix</a>, <a href="https://www.k2view.com" class="external-link">K2View</a>, and <a href="https://accutive.com/" class="external-link">Accutive</a>), but these are often expensive and cumbersome, limiting uptake in the domain of research. The research community hence requires a simple toolbox for the application of several common ‘data masking transforms’ implemented in an open source language.</p>
<p>This implementation of the <code>deident</code> methods is in R, chosen due to the increased adoption of open source software into the working practices of the NHS (driven by the growth on the NHS-R community and similar groups). However, the underlying specification, and implementation of the transforms can be ported to other languages.</p>
<p>This package was designed considering the ICO guidelines on anonymization [@ICOAnonymisation] and draws on pre-existing methodologies and naming conventions [@NIST2015; @integrateIO]. The package implemented de-identification via:</p>
<ul><li>pseudonymization – the consistent replacement of a string by a random string</li>
<li>encryption - the consistent replacement of a string by an alpha-numeric hash using an encryption key and salt</li>
<li>shuffling – replacement of columns by a random sample without replacement</li>
<li>bluring – the aggregation of numeric or categorical data according to specified rules</li>
<li>perturbation – the addition of user-defined random noise to a numeric variable</li>
</ul><p>Following the design principles of the existing tidyverse [@tidyverse] domain for ease of adoption. The package includes tools to create a single pipeline for the application of a multi-step deidentification pipeline to multiple files stored within the same repository, alongside the option to serialize/ define the pipeline to/ via yaml. This approach allows a researcher to design and implement an appropriate de-identification plan and deliver it to the research support/ business intelligence team of an organisation with limited knowledge of the sensitive data. The supply of an easy method for de-identifying data sets which requires little scripting knowledge by Trust staff may aid in overcoming several information governance risks that keep operational data siloed within health Trusts.</p>
</div>
<div class="section level1">
<h1 id="comparison-to-existing-r-packages">Comparison to existing R packages<a class="anchor" aria-label="anchor" href="#comparison-to-existing-r-packages"></a></h1>
<p>Several packages have undergone development for the implementation of encryption methods to minimize identifiability within data sets (e.g. <code>anonymizer</code> [@Anonymizer2024], <code>deidentifyr</code> [@deidentifyr2024] and <code>digest</code> [@digest2021]). While these packages implement a variety of encryption tools, such systems are not infallible [@wang2005break; @szikora2022end ] especially if the data being encrypted is drawn from a known domain such as common names. This package introduces the stateful ‘pseudonymization’ method by which string vectors are replaced by a randomly generated hash the first time they are observed and then preserved for re-use. As such, breaking a single hash no longer exposes the ‘key’ and ‘salt’ the encryption relies on. In addition, this package introduces methods for removing pseudo-identifiability (identification via the combination of features) via the other methods included.</p>
</div>
<div class="section level1">
<h1 id="in-practice">In practice<a class="anchor" aria-label="anchor" href="#in-practice"></a></h1>
<p>To install the current version of the <code>deident</code> package, run the command</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"Stat-Cook/deident"</span><span class="op">)</span></span></code></pre></div>
<p>The core functionality of the package is the <code>deident</code> function. To demonstrate functionality we use a subset of the <code>babynames</code> data set [@babynames2021] consisting of the final two years.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">babynames</span> <span class="op">&lt;-</span> <span class="fu">babynames</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/babynames/man/babynames.html" class="external-link">babynames</a></span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">2015</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">babynames</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="do">## tibble [65,448 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="do">##  $ year: num [1:65448] 2016 2016 2016 2016 2016 ...</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="do">##  $ sex : chr [1:65448] "F" "F" "F" "F" ...</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="do">##  $ name: chr [1:65448] "Emma" "Olivia" "Ava" "Sophia" ...</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="do">##  $ n   : int [1:65448] 19471 19327 16283 16112 14772 14415 13080 11747 10957 10773 ...</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="do">##  $ prop: num [1:65448] 0.0101 0.01002 0.00844 0.00835 0.00766 ...</span></span></code></pre></div>
<p>The <code>deident</code> function produces a pipeline of actions and the variables to be transformed, with each subsequent call of <code>deident</code> adding a further transformation. The first argument of <code>deident</code> can either be a data frame or the output of a previous <code>deident</code> call.</p>
<p>The simplest use case is transforming one variable via a single method:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">deident</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pipeline</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deident.html">deident</a></span><span class="op">(</span><span class="va">babynames</span>, <span class="st">"psudonymize"</span>, <span class="va">name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/apply_deident.html">apply_deident</a></span><span class="op">(</span><span class="va">babynames</span>, <span class="va">pipeline</span><span class="op">)</span></span></code></pre></div>
<p>The same method can be applied to multiple variables by adding the variable names:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pipeline2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deident.html">deident</a></span><span class="op">(</span><span class="va">babynames</span>, <span class="st">"psudonymize"</span>, <span class="va">name</span>, <span class="va">sex</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/apply_deident.html">apply_deident</a></span><span class="op">(</span><span class="va">babynames</span>, <span class="va">pipeline2</span><span class="op">)</span></span></code></pre></div>
<p>The transformations can also be initialized as base classes, allowing for them to be shared between pipelines:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">psu</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/Pseudonymizer.html">Pseudonymizer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pipeline3</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deident.html">deident</a></span><span class="op">(</span><span class="va">psu</span>, <span class="va">Var1</span>, <span class="va">Var2</span><span class="op">)</span></span>
<span><span class="va">pipeline4</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deident.html">deident</a></span><span class="op">(</span><span class="va">psu</span>, <span class="va">Var3</span>, <span class="va">Var4</span><span class="op">)</span></span></code></pre></div>
<p>Performing a multi-stage transformation can be done by chaining together calls to <code>deident</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blur</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/NumericBlurrer.html">NumericBlurrer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>cuts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pipeline3</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deident.html">deident</a></span><span class="op">(</span><span class="va">babynames</span>, <span class="st">"psudonymize"</span>, <span class="va">name</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/deident.html">deident</a></span><span class="op">(</span><span class="va">blur</span>, <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/apply_deident.html">apply_deident</a></span><span class="op">(</span><span class="va">babynames</span>, <span class="va">pipeline3</span><span class="op">)</span></span></code></pre></div>
<p>An in depth example can be found in the <code>Worked Example</code> vigentte, while more details on each method are presented in the <code>deident transforms</code> vignette.</p>
<div class="section level2">
<h2 id="current-applications">Current applications<a class="anchor" aria-label="anchor" href="#current-applications"></a></h2>
<p>The <code>deident</code> toolbox was developed for applications in the NuRS and AmreS research projects which aim to extract and analyze retrospective operational data from NHS Trusts to understand staff retention and patient safety.</p>
</div>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a></h2>
<p>The package was designed by RC, MA, and SJ. Implementation was done by RC. Quality assurance was done by MA. Documentation was written by RC, and SJ. Funding for the work was won by RC and SJ.</p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a></h2>
<p>The development of <code>deident</code> was part of the he NuRS and AmReS projects funded by the Health Foundation.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
</div>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Robert Cook, Md Assaduzzaman, Sarahjane Jones.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

